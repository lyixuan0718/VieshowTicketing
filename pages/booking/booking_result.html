<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨‚ç¥¨çµæœ - Vieshow Ticketing</title> 
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .btn-main {
            display: inline-block;
            padding: 10px 16px;
            background-color: #2563eb;
            color: white;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            transition: 0.2s;
        }
        .btn-main:hover {
            background-color: #1e40af;
        }
        .btn-danger {
            background-color: #e50914;
        }
        .btn-danger:hover {
            background-color: #b20710;
        }
    </style>
</head>

<body class="antialiased">

<!-- Header -->
<header class="bg-gray-800 text-white shadow-md">
    <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
        <a href="../../index.html" class="text-xl font-bold hover:text-red-400 transition">Vieshow å½±åŸ</a>
        <div class="space-x-4">
            <a href="../auth/login.html" class="hover:text-yellow-300 transition">ç™»å…¥</a>
            <a href="../member/member_home.html" class="hover:text-yellow-300 transition">æœƒå“¡ä¸­å¿ƒ</a>
        </div>
    </nav>
</header>

<!-- Main Container -->
<div class="w-11/12 md:max-w-2xl mx-auto my-8 p-6 bg-white border border-gray-200 rounded-xl shadow-2xl text-center">

    <h2 class="text-2xl font-extrabold text-gray-900 mb-6 text-center">
        ğŸ¬ è¨‚ç¥¨çµæœ
    </h2>

    <!-- æˆåŠŸçµæœ -->
    <div id="successSection" class="hidden text-center">
        <h3 class="text-green-600 text-xl font-bold">ğŸ‰ è¨‚ç¥¨æˆåŠŸï¼</h3>

        <p class="mt-3 text-gray-700">æ‚¨çš„è¨‚å–®å·²æˆåŠŸå»ºç«‹ä¸¦ä»˜æ¬¾ã€‚</p>

        <p class="mt-2 text-gray-900 text-lg font-semibold">
            è¨‚å–®ç·¨è™Ÿï¼š<span id="orderId" class="text-blue-600"></span>
        </p>

        <p class="mt-2 text-gray-700">æ‚¨å¯è‡³ã€Œè¨‚ç¥¨ç´€éŒ„ã€æŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚</p>

        <a href="booking_history.html" class="btn-main mt-5 inline-block">æŸ¥çœ‹è¨‚ç¥¨ç´€éŒ„</a>
    </div>

    <!-- å¤±æ•—çµæœ -->
    <div id="failSection" class="hidden text-center">
        <h3 class="text-red-600 text-xl font-bold">âŒ è¨‚ç¥¨å¤±æ•—</h3>

        <p class="mt-3 text-gray-700">ä»˜æ¬¾éç¨‹ç™¼ç”ŸéŒ¯èª¤æˆ–æ‚¨å–æ¶ˆäº†äº¤æ˜“ã€‚</p>
        <p class="mt-2 text-gray-700">è«‹ç¢ºèªä»˜æ¬¾è³‡è¨Šå¾Œå†è©¦ä¸€æ¬¡ã€‚</p>

        <a href="booking_flow_5.html" class="btn-main btn-danger mt-5 inline-block">
            é‡æ–°ä»˜æ¬¾ï¼ˆè¿”å›æ­¥é©Ÿ 5ï¼‰
        </a>
    </div>

</div>

<!-- JS -->
<script>
    function loadResult() {
        const params = new URLSearchParams(window.location.search);
        const status = params.get("status");

        const successSection = document.getElementById("successSection");
        const failSection = document.getElementById("failSection");

        if (status === "success") {
            const orderData = localStorage.getItem("lastCompletedBooking");

            if (!orderData) {
                successSection.classList.add("hidden");
                failSection.classList.remove("hidden");
                return;
            }

            const order = JSON.parse(orderData);

            document.getElementById("orderId").textContent = order.orderId || "ORDER-UNKNOWN";

            successSection.classList.remove("hidden");
            failSection.classList.add("hidden");

            localStorage.removeItem("currentBooking");

        } else {
            successSection.classList.add("hidden");
            failSection.classList.remove("hidden");
        }
    }

    loadResult();
</script>

<footer class="bg-gray-800 text-white text-center py-4 mt-8 shadow-inner">
    <p>&copy; 2025 Vieshow Ticketing System</p>
</footer>

</body>
</html>
